var EventPulse=function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=t.call(e,a)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}"function"==typeof SuppressedError&&SuppressedError;var r={apiKey:""},o=function(){return r};var i=function(){var e,t,n,r,o=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r].trim();if(0===o.indexOf(t))return o.substring(t.length,o.length)}return null}("eventPulse_anonymousID");return o||(o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),e="eventPulse_anonymousID",t=o,n=7,(r=new Date).setTime(r.getTime()+24*n*60*60*1e3),document.cookie="".concat(e,"=").concat(t,";expires=").concat(r.toUTCString(),";path=/")),o},a=function(e,r,o){return t(void 0,void 0,void 0,(function(){return n(this,(function(t){return[2,{anonymousId:i(),context:{library:{name:"eventpulse-sdk-js.cjs",version:"1.1.1"},page:{path:window.location.pathname,referrer:document.referrer,search:window.location.search,title:document.title,url:window.location.href},userAgent:navigator.userAgent},event:e,properties:r,timestamp:(new Date).toISOString(),type:o}]}))}))};function u(e,r,i){return t(this,void 0,void 0,(function(){var t,u,c,s,l,f;return n(this,(function(n){switch(n.label){case 0:if(t=o(),!(u=t.apiKey))throw new Error("API key is not set. Please call eventPulse.load(apiKey) with a valid API key.");return c=btoa(u),[4,a(e||"Track",r,i)];case 1:s=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,fetch("https://eventpulse-app.vercel.app/api/js-events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:c,event:e,eventData:s})})];case 3:if(!(l=n.sent()).ok)throw new Error("HTTP error! status: ".concat(l.status));return[3,5];case 4:return f=n.sent(),console.error("Error tracking event:",f),[3,5];case 5:return[2]}}))}))}function c(){return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,u("Page",{},"page")];case 1:return e.sent(),[2]}}))}))}function s(e){return t(this,arguments,void 0,(function(e,t,r){return void 0===t&&(t={}),n(this,(function(n){switch(n.label){case 0:return[4,u(e,t,r)];case 1:return n.sent(),[2]}}))}))}var l=function(){function o(){}return o.getInstance=function(){return o.instance||(o.instance=new o),o.instance},o.prototype.load=function(t){if(!t)throw new Error("API key is not set.");var n;return n={apiKey:t},r=e(e({},r),n),this},o.prototype.track=function(e,r){return t(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,s(e,r,"track")];case 1:return t.sent(),[2]}}))}))},o.prototype.page=function(){return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,c()];case 1:return e.sent(),[2]}}))}))},o}().getInstance();return"undefined"!=typeof window&&(window.eventPulse={load:l.load.bind(l),track:l.track.bind(l),page:l.page.bind(l)}),l}();

"use strict";var e=require("tslib"),t={apiKey:""},n=function(){return t};var r=function(){var e,t,n,r,i=function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].trim();if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}("eventPulse_anonymousID");return i||(i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),e="eventPulse_anonymousID",t=i,n=7,(r=new Date).setTime(r.getTime()+24*n*60*60*1e3),document.cookie="".concat(e,"=").concat(t,";expires=").concat(r.toUTCString(),";path=/")),i},i=function(t,n,i){return e.__awaiter(void 0,void 0,void 0,(function(){return e.__generator(this,(function(e){return[2,{anonymousId:r(),context:{library:{name:"eventpulse-sdk-js.cjs",version:"1.1.1"},page:{path:window.location.pathname,referrer:document.referrer,search:window.location.search,title:document.title,url:window.location.href},userAgent:navigator.userAgent},event:t,properties:n,timestamp:(new Date).toISOString(),type:i}]}))}))};function o(t,r,o){return e.__awaiter(this,void 0,void 0,(function(){var a,s,u,c,l,f;return e.__generator(this,(function(e){switch(e.label){case 0:if(a=n(),!(s=a.apiKey))throw new Error("API key is not set. Please call eventPulse.load(apiKey) with a valid API key.");return u=btoa(s),[4,i(t||"Track",r,o)];case 1:c=e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,fetch("https://eventpulse-app.vercel.app/api/js-events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:u,event:t,eventData:c})})];case 3:if(!(l=e.sent()).ok)throw new Error("HTTP error! status: ".concat(l.status));return[3,5];case 4:return f=e.sent(),console.error("Error tracking event:",f),[3,5];case 5:return[2]}}))}))}function a(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,o("Page",{},"page")];case 1:return e.sent(),[2]}}))}))}function s(t){return e.__awaiter(this,arguments,void 0,(function(t,n,r){return void 0===n&&(n={}),e.__generator(this,(function(e){switch(e.label){case 0:return[4,o(t,n,r)];case 1:return e.sent(),[2]}}))}))}var u=function(){function n(){}return n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.prototype.load=function(n){if(!n)throw new Error("API key is not set.");var r;return r={apiKey:n},t=e.__assign(e.__assign({},t),r),this},n.prototype.track=function(t,n){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,s(t,n,"track")];case 1:return e.sent(),[2]}}))}))},n.prototype.page=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,a()];case 1:return e.sent(),[2]}}))}))},n}().getInstance();module.exports=u;
//# sourceMappingURL=eventpulse-sdk-js.cjs.map

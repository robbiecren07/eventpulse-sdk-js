import{__assign as t,__awaiter as e,__generator as n}from"tslib";var r={apiKey:""},o=function(){return r};var i=function(){var t,e,n,r,o=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){var o=n[r].trim();if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null}("eventPulse_anonymousID");return o||(o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),t="eventPulse_anonymousID",e=o,n=7,(r=new Date).setTime(r.getTime()+24*n*60*60*1e3),document.cookie="".concat(t,"=").concat(e,";expires=").concat(r.toUTCString(),";path=/")),o},a=function(t,r,o){return e(void 0,void 0,void 0,(function(){return n(this,(function(e){return[2,{anonymousId:i(),context:{library:{name:"eventpulse-sdk-js.cjs",version:"1.1.0"},page:{path:window.location.pathname,referrer:document.referrer,search:window.location.search,title:document.title,url:window.location.href},userAgent:navigator.userAgent},event:t,properties:r,timestamp:(new Date).toISOString(),type:o}]}))}))};function s(t,r,i){return e(this,void 0,void 0,(function(){var e,s,c,u,l,f;return n(this,(function(n){switch(n.label){case 0:if(e=o(),!(s=e.apiKey))throw new Error("API key is not set. Please call eventPulse.load(apiKey) with a valid API key.");return c=btoa(s),[4,a(t||"Track",r,i)];case 1:u=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,fetch("https://eventpulse-app.vercel.app/api/js-events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:c,event:t,eventData:u})})];case 3:if(!(l=n.sent()).ok)throw new Error("HTTP error! status: ".concat(l.status));return[3,5];case 4:return f=n.sent(),console.error("Error tracking event:",f),[3,5];case 5:return[2]}}))}))}function c(){return e(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,s("Page",{},"page")];case 1:return t.sent(),[2]}}))}))}function u(t){return e(this,arguments,void 0,(function(t,e,r){return void 0===e&&(e={}),n(this,(function(n){switch(n.label){case 0:return[4,s(t,e,r)];case 1:return n.sent(),[2]}}))}))}var l=function(){function o(){}return o.getInstance=function(){return o.instance||(o.instance=new o),o.instance},o.prototype.load=function(e){if(!e)throw new Error("API key is not set.");var n;return n={apiKey:e},r=t(t({},r),n),this},o.prototype.track=function(t,r){return e(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,u(t,r,"track")];case 1:return e.sent(),[2]}}))}))},o.prototype.page=function(){return e(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,c()];case 1:return t.sent(),[2]}}))}))},o}().getInstance();export{l as default};
//# sourceMappingURL=eventpulse-sdk-js.mjs.map
